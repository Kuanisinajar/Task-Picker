(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{197:function(e,t,a){e.exports=a.p+"static/media/profile.4b7620c7.svg"},199:function(e,t,a){e.exports=a(398)},204:function(e,t,a){},398:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(194),i=a.n(s),c=(a(204),a(4)),l=a(6),o=a(7),u=a(10),h=a(8),d=a(11),p=a(24),g=a(23),m=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={tag:a.props.tag,active:!1},a.handleClick=function(e){a.setState({active:!a.state.active},function(){a.props.checkTagState(a.state.active,a.props.tag)})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:this.state.active?"tagObj tagActive":"tagObj",onClick:this.handleClick},this.props.tag)}}]),t}(n.Component),f=a(9),b=a(25),E=a(17),k=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={noNewTag:a.props.noNewTag,tag:{tag:"",ownerId:a.props.auth.uid}},a.handleChange=function(e){a.setState({tag:Object(c.a)({},a.state.tag,{tag:e.target.value})})},a.handleSubmit=function(e){a.props.addTag(a.state.tag),a.setState({tag:Object(c.a)({},a.state.tag,{tag:""})})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state.noNewTag?null:r.a.createElement("div",{id:"tag-input",className:"tagObj"},r.a.createElement("input",{type:"text",onChange:this.handleChange,value:this.state.tag.tag,placeholder:"New Task"}),r.a.createElement("span",{onClick:this.handleSubmit},"submit")),a=this.props.userTags&&this.props.userTags?this.props.userTags.map(function(t,a){return r.a.createElement(m,{tag:t.tag,checkTagState:e.props.checkTagState,key:a})}):r.a.createElement("p",null,"No tags"),n=this.props.defaultTags&&this.props.defaultTags?this.props.defaultTags.map(function(t,a){return r.a.createElement(m,{tag:t.tag,checkTagState:e.props.checkTagState,key:a})}):r.a.createElement("p",null,"No tags");return r.a.createElement("div",{id:"tagList"},t,this.props.auth.uid?a:n)}}]),t}(n.Component),v=Object(E.d)(Object(f.b)(function(e){return{userTags:e.firestore.ordered.userTags&&e.firestore.ordered.userTags.filter(function(t){return t.ownerId===e.firebase.auth.uid}),defaultTags:e.firestore.ordered.defaultTags,auth:e.firebase.auth,firestore:e.firestore}},function(e){return{addTag:function(t){e(function(e){return function(t,a,n){n.getfirebase,(0,n.getFirestore)().collection("userTags").add(Object(c.a)({},e)).then(function(){t({type:"ADD_TAG",tag:e})}).catch(function(e){t({type:"ADD_TAG_ERROR",err:e})})}}(t))}}}),Object(b.firestoreConnect)([{collection:"defaultTags"},{collection:"userTags"}]))(k),T=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={task:{task:a.props.task.task,description:a.props.task.description,tags:a.props.task.tags,id:a.props.task.id},editing:!1},a.toggleEditMode=function(){a.setState({editing:!a.state.editing})},a.handleChange=function(e){a.setState({task:Object(c.a)({},a.state.task,Object(g.a)({},e.target.name,e.target.value))})},a.handleTags=function(e){var t=e.target.value.split(" ");a.setState({task:Object(c.a)({},a.state.task,{tags:t})})},a.handleSubmit=function(e){e.preventDefault(),a.props.editTask(a.state.task),a.setState({editing:!a.state.editing})},a.checkTagState=function(e,t){var n=Object(p.a)(a.state.task.tags);e?(n.push(t),a.setState({task:Object(c.a)({},a.state.task,{tags:n})})):(n=n.filter(function(e){return e!==t}),a.setState({task:Object(c.a)({},a.state.task,{tags:n})}))},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;console.log(this.props.task.tags);var t=this.props.task.tags&&this.props.task.tags.map(function(e,t){return r.a.createElement("div",{key:t,className:"tagObj"},e)}),a=this.state.editing?r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",name:"task",onChange:this.handleChange,defaultValue:this.state.task.task,autoComplete:"off"}),r.a.createElement("input",{type:"text",name:"description",onChange:this.handleChange,defaultValue:this.state.task.description,autoComplete:"off"}),r.a.createElement("input",{type:"text",name:"tags",onChange:this.handleTags,value:this.state.task.tags.join(" "),autoComplete:"off"}),r.a.createElement(v,{checkTagState:this.checkTagState,noNewTag:!1}),r.a.createElement("button",null,"submit")):r.a.createElement("div",{className:"taskObjWrapper"},r.a.createElement("div",{className:"title"},this.props.task.task),r.a.createElement("div",{className:"description"},this.props.task.description),r.a.createElement("div",{className:"tags"},t),r.a.createElement("button",{className:"deleteBtn",onClick:function(){e.props.deleteTask(e.props.task.id)}},"Delete"),r.a.createElement("button",{className:"editBtn",onClick:this.toggleEditMode},"Edit"));return r.a.createElement("div",{className:"taskObj",key:this.props.task.id},a)}}]),t}(n.Component),O=Object(f.b)(function(e){return{userId:e.auth.uid}},function(e){return{deleteTask:function(t){e(function(e){return function(t,a,n){n.getFirebase,(0,n.getFirestore)().collection("userTasks").doc(e).delete().then(function(){t({type:"DELETE_TASK"})}).catch(function(e){t({type:"DELETE_TASK_ERROR",err:e})})}}(t))},editTask:function(t){e(function(e){return function(t,a,n){n.getFirebase,(0,n.getFirestore)().collection("userTasks").doc(e.id).update(Object(c.a)({},e)).then(function(){t({type:"UPDATE_TASK",task:e})}).catch(function(e){t({type:"UPDATE_TASK_ERROR",err:e})})}}(t))}}})(T),j=Object(f.b)(function(e){return{currentTask:e.project.currentTask}})(function(e){var t=e.currentTask,a=t?r.a.createElement(O,{tasks:t}):r.a.createElement("span",null,"No task!");return r.a.createElement("div",{id:"currentTask"},a)}),S=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleSelect=function(e,t){var a=document.getElementsByClassName("area-line"),n=document.getElementById("title-scroll"),r=document.getElementById("template"),s=!0,i=!1,c=void 0;try{for(var l,o=a[Symbol.iterator]();!(s=(l=o.next()).done);s=!0){l.value.classList.remove("area-line-active")}}catch(u){i=!0,c=u}finally{try{s||null==o.return||o.return()}finally{if(i)throw c}}e.target.classList.toggle("area-line-active"),n.style.transform="translate(0, -"+100*t+"%)",r.style.transform="translate(-"+100*t+"%, 0)"},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"nav"},r.a.createElement("div",{id:"area-titles"},r.a.createElement("div",{id:"title-scroll"},r.a.createElement("div",{className:"title"},r.a.createElement("span",null,"\u6311\u4efb\u52d9")),r.a.createElement("div",{className:"title"},r.a.createElement("span",null,"\u7576\u4e0b\u4efb\u52d9")),r.a.createElement("div",{className:"title"},r.a.createElement("span",null,"\u65b0\u589e\u4efb\u52d9")),r.a.createElement("div",{className:"title"},r.a.createElement("span",null,"\u4efb\u52d9\u6e05\u55ae")))),r.a.createElement("div",{id:"area-paging"},r.a.createElement("div",{className:"area-line area-line-active",onClick:function(t){e.handleSelect(t,0)}}),r.a.createElement("div",{className:"area-line",onClick:function(t){e.handleSelect(t,1)}}),r.a.createElement("div",{className:"area-line",onClick:function(t){e.handleSelect(t,2)}}),r.a.createElement("div",{className:"area-line",onClick:function(t){e.handleSelect(t,3)}})))}}]),t}(n.Component),y=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={task:"",description:"",tags:[],ownerId:a.props.auth.uid},a.checkTagState=function(e,t){var n=Object(p.a)(a.state.tags);if(e)n.push(t),a.setState({tags:n});else{var r=n.filter(function(e){return e!==t});a.setState({tags:r})}},a.handleChange=function(e){a.setState(Object(g.a)({},e.target.id,e.target.value))},a.handleTags=function(e){var t=e.target.value.split(" ");a.setState({tags:t})},a.handleSubmit=function(e){e.preventDefault(),a.props.auth.uid&&a.props.addTask(a.state,a.props.auth.uid),a.setState({task:"",description:"",tags:[]})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{id:"taskForm",onSubmit:this.handleSubmit},r.a.createElement("label",{htmlFor:"task"},"Task: "),r.a.createElement("input",{type:"text",id:"task",onChange:this.handleChange,value:this.state.task,autoComplete:"off",form:"taskForm"}),r.a.createElement("label",{htmlFor:"description"}," Description"),r.a.createElement("input",{type:"text",id:"description",onChange:this.handleChange,value:this.state.description,autoComplete:"off",form:"taskForm"}),r.a.createElement("label",{htmlFor:"tags"},"Tags: "),r.a.createElement("input",{type:"text",id:"tags",onChange:this.handleTags,value:this.state.tags.join(" "),autoComplete:"off",form:"taskForm"}),r.a.createElement(v,{checkTagState:this.checkTagState,noNewTag:!1}),r.a.createElement("button",{form:"taskForm"},"submit")))}}]),t}(n.Component),C=Object(f.b)(function(e){return{allTags:e.project.allTags,auth:e.firebase.auth}},function(e){return{addTask:function(t,a){e(function(e){return function(t,a,n){n.getFirebase,(0,n.getFirestore)().collection("userTasks").add(Object(c.a)({},e)).then(function(){t({type:"ADD_TASK",task:e})}).catch(function(e){t({type:"ADD_TASK_ERROR",err:e})})}}(t))}}})(y),w=Object(E.d)(Object(f.b)(function(e){return{userTasks:e.firestore.ordered.userTasks&&e.firestore.ordered.userTasks.filter(function(t){return t.ownerId===e.firebase.auth.uid}),defaultTasks:e.firestore.ordered.defaultTasks,firestore:e.firestore,auth:e.firebase.auth}}),Object(b.firestoreConnect)([{collection:"defaultTasks"},{collection:"userTasks"}]))(function(e){var t=e.defaultTasks,a=e.userTasks,n=e.auth,s=t&&t.length?t.map(function(e){return r.a.createElement(O,{key:e.id,task:e})}):r.a.createElement("p",null,"No Tasks!"),i=a&&a.length?a.map(function(e){return r.a.createElement(O,{key:e.id,task:e})}):r.a.createElement("p",null,"No Tasks!");return r.a.createElement("div",{id:"taskList"},n.uid?i:s)}),A=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={selectedTags:[]},a.checkTagState=function(e,t){var n=Object(p.a)(a.state.selectedTags);e?(n.push(t),a.setState({selectedTags:n})):(n=n.filter(function(e){return e!==t}),a.setState({selectedTags:n}))},a.pickTask=function(){var e=Object(p.a)(a.props.tasks),t=[],n=!0,r=!1,s=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var l=i.value,o=!1,u=!0,h=!1,d=void 0;try{for(var g,m=l.tags[Symbol.iterator]();!(u=(g=m.next()).done);u=!0){var f=g.value,b=!0,E=!1,k=void 0;try{for(var v,T=a.state.selectedTags[Symbol.iterator]();!(b=(v=T.next()).done);b=!0){f===v.value&&(o=!0)}}catch(O){E=!0,k=O}finally{try{b||null==T.return||T.return()}finally{if(E)throw k}}}}catch(O){h=!0,d=O}finally{try{u||null==m.return||m.return()}finally{if(h)throw d}}o&&t.push(l)}}catch(O){r=!0,s=O}finally{try{n||null==c.return||c.return()}finally{if(r)throw s}}0===t.length?a.props.setCurrentTask(e[Math.floor(Math.random()*e.length)]):a.props.setCurrentTask(t[Math.floor(Math.random()*t.length)])},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"picker"},r.a.createElement("p",null,"filters: "),r.a.createElement(v,{checkTagState:this.checkTagState,noNewTag:!0}),r.a.createElement("button",{onClick:this.pickTask},"Pick!"))}}]),t}(n.Component),N=Object(f.b)(function(e){return{tasks:e.project.tasks,allTags:e.project.allTags,currentTask:e.project.currentTask}},function(e){return{setCurrentTask:function(t){e(function(e){return{type:"SET_CURRENT_TASK",task:e}}(t))}}})(A),R=a(400),_=a(399),D=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(s)))).state={email:"",password:""},a.redirectToHome=function(){return r.a.createElement(R.a,{to:"/"})},a.handleChange=function(e){a.setState(Object(g.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.signIn(a.state)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return console.log(this.props),this.props.auth.uid?r.a.createElement(R.a,{to:"/"}):r.a.createElement("div",{id:"signInForm"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"authTitle"},"\u767b\u5165"),r.a.createElement(_.a,{to:"/"},r.a.createElement("div",{className:"closeBtn"},r.a.createElement("div",{className:"bar"}))),r.a.createElement("input",{type:"text",id:"email",onChange:this.handleChange,value:this.state.email,placeholder:"\u5e33\u865f"}),r.a.createElement("input",{type:"text",id:"password",onChange:this.handleChange,value:this.state.password,placeholder:"\u5bc6\u78bc"}),r.a.createElement("button",null,"Submit")))}}]),t}(n.Component),U=Object(f.b)(function(e){return{auth:e.firebase.auth,authError:e.auth.authError}},function(e){return{signIn:function(t){var a;e((a=t,function(e,t,n){var r=n.getFirebase,s=n.getFirestore,i=r(),c=s();i.auth().signInWithEmailAndPassword(a.email,a.password).then(function(){var t=i.auth().currentUser.uid;c.collection("users").doc(t).get().then(function(t){e({type:"LOGIN_SUCCESS",data:t.data()})}).catch(function(e){console.log(e)})}).catch(function(t){e({type:"LOGIN_ERROR",err:t})})}))},signOut:function(){e(function(e,t,a){(0,a.getFirebase)().auth().signOut().then(function(){e({type:"LOGOUT_SUCCESS"})})})}}})(D),F=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",name:""},a.handleChange=function(e){a.setState(Object(g.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.signUp(a.state)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.props.auth.uid?r.a.createElement(R.a,{to:"/"}):r.a.createElement("div",{id:"signUpForm"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"authTitle"},"\u52a0\u5165\u5427\uff01"),r.a.createElement(_.a,{to:"/"},r.a.createElement("div",{className:"closeBtn"},r.a.createElement("div",{className:"bar"}))),r.a.createElement("input",{type:"text",id:"email",onChange:this.handleChange,value:this.state.email,placeholder:"email"}),r.a.createElement("input",{type:"text",id:"password",onChange:this.handleChange,value:this.state.password,placeholder:"password"}),r.a.createElement("input",{type:"text",id:"name",onChange:this.handleChange,value:this.state.name,placeholder:"name"}),r.a.createElement("button",null,"submit")))}}]),t}(n.Component),I=Object(f.b)(function(e){return{auth:e.firebase.auth,authError:e.auth.authError}},function(e){return{signUp:function(t){e(function(e){return function(t,a,n){var r=n.getFirebase,s=n.getFirestore,i=r(),c=s();i.auth().createUserWithEmailAndPassword(e.email,e.password).then(function(t){return c.collection("users").doc(t.user.uid).collection("user-profile").add({name:e.name})}).then(function(){t({type:"SIGNUP_SUCCESS"})}).catch(function(e){t({type:"SIGNUP_ERROR",err:e})})}}(t))}}})(F),x=a(197),P=a.n(x),L=(n.Component,a(401)),K=a(402),G=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.firebase.auth.uid?r.a.createElement("div",{id:"authPannel"},r.a.createElement("button",{onClick:function(){e.props.signOut()}},"Sign Out")):r.a.createElement("div",{id:"authPannel"},r.a.createElement(_.a,{to:"/signIn",onClick:this.toggleAuthPannel},"Sign In"),r.a.createElement(_.a,{to:"/signUp",onClick:this.toggleAuthPannel},"Sign Up"));return r.a.createElement(L.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("ul",{id:"template"},r.a.createElement("li",null,r.a.createElement(N,null)),r.a.createElement("li",null,r.a.createElement(j,null)),r.a.createElement("li",null,r.a.createElement(C,null)),r.a.createElement("li",null,r.a.createElement(w,null))),r.a.createElement(S,null),t,r.a.createElement(K.a,{path:"/signIn",component:U}),r.a.createElement(K.a,{path:"/signUp",component:I})))}}]),t}(n.Component),B=Object(f.b)(function(e){return Object(c.a)({},e)},function(e){return{signOut:function(){e(function(e,t,a){(0,a.getFirebase)().auth().signOut().then(function(){e({type:"LOGOUT_SUCCESS"})})})}}})(G);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var M={tasks:[],allTags:[],currentTask:null},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TASK":console.log(t.task);var a=Object(p.a)(e.tasks).concat([t.task]);return Object(c.a)({},e,{tasks:a});case"ADD_TASK_ERROR":return console.log(t.err),e;case"DELETE_TASK":return console.log("this is deleted"),e;case"DELETE_TASK_ERROR":return console.log(t.err),e;case"UPDATE_TASK":return console.log("update success"),e;case"UPDATE_TASK_ERROR":return console.log(t.err),e;case"ADD_TAG":var n=!0,r=!0,s=!1,i=void 0;try{for(var l,o=e.allTags[Symbol.iterator]();!(r=(l=o.next()).done);r=!0){var u=l.value;t.tag===u&&(n=!1)}}catch(d){s=!0,i=d}finally{try{r||null==o.return||o.return()}finally{if(s)throw i}}var h=Object(p.a)(e.allTags);return n?(h.push(t.tag),Object(c.a)({},e,{allTags:h})):e;case"SET_CURRENT_TASK":return Object(c.a)({},e,{currentTask:t.task});default:return e}},V={authError:null,userTasks:[],userTags:[]},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ERROR":return Object(c.a)({},e,{authError:"Login failed :("});case"LOGIN_SUCCESS":return console.log("logIn success!"),console.log(t.data),{authError:null,userTasks:t.data.userTasks,userTags:t.data.userTags};case"USER_DATA_LOADED":return console.log("we did it"),e;case"LOGOUT_SUCCESS":return console.log("logout success"),e;case"SIGNUP_SUCCESS":return console.log("signup success"),Object(c.a)({},e,{authError:null});case"SIGNUP_ERROR":return console.log("signup failed"),Object(c.a)({},e,{authError:t.err.message});default:return e}},J=a(55),q=Object(E.c)({project:W,auth:z,firestore:J.firestoreReducer,firebase:b.firebaseReducer}),H=a(198),Z=a(80),$=a.n(Z);a(391),a(396);$.a.initializeApp({apiKey:"AIzaSyDolOZMc-UodjynPUfkjyrq9m95VO3Peck",authDomain:"task-picker-de255.firebaseapp.com",databaseURL:"https://task-picker-de255.firebaseio.com",projectId:"task-picker-de255",storageBucket:"task-picker-de255.appspot.com",messagingSenderId:"614294430544"}),$.a.firestore().settings({timestampsInSnapshots:!0});var Q=$.a,X=Object(E.e)(q,Object(E.d)(Object(E.a)(H.a.withExtraArgument({getFirebase:b.getFirebase,getFirestore:J.getFirestore})),Object(J.reduxFirestore)(Q),Object(b.reactReduxFirebase)(Q,{useFirestoreForProfile:!0,userProfile:"users",attachAuthIsReady:!0})));X.firebaseAuthIsReady.then(function(){i.a.render(r.a.createElement(f.a,{store:X},r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})})}},[[199,2,1]]]);
//# sourceMappingURL=main.ed452df6.chunk.js.map